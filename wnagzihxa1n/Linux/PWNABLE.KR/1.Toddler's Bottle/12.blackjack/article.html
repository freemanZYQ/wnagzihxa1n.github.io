<!DOCTYPE html>
<html>
<head>
<title>WriteUp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
<style type="text/css">
.highlight  { background: #ffffff; }
.highlight .c { color: #999988; font-style: italic } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { font-weight: bold } /* Keyword */
.highlight .o { font-weight: bold } /* Operator */
.highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #999999; font-weight: bold } /* Comment.Preproc */
.highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */
.highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .gd .x { color: #000000; background-color: #ffaaaa } /* Generic.Deleted.Specific */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #999999 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .gi .x { color: #000000; background-color: #aaffaa } /* Generic.Inserted.Specific */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #aaaaaa } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { font-weight: bold } /* Keyword.Constant */
.highlight .kd { font-weight: bold } /* Keyword.Declaration */
.highlight .kp { font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #009999 } /* Literal.Number */
.highlight .s { color: #d14 } /* Literal.String */
.highlight .na { color: #008080 } /* Name.Attribute */
.highlight .nb { color: #0086B3 } /* Name.Builtin */
.highlight .nc { color: #445588; font-weight: bold } /* Name.Class */
.highlight .no { color: #008080 } /* Name.Constant */
.highlight .ni { color: #800080 } /* Name.Entity */
.highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #990000; font-weight: bold } /* Name.Function */
.highlight .nn { color: #555555 } /* Name.Namespace */
.highlight .nt { color: #000080 } /* Name.Tag */
.highlight .nv { color: #008080 } /* Name.Variable */
.highlight .ow { font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #009999 } /* Literal.Number.Float */
.highlight .mh { color: #009999 } /* Literal.Number.Hex */
.highlight .mi { color: #009999 } /* Literal.Number.Integer */
.highlight .mo { color: #009999 } /* Literal.Number.Oct */
.highlight .sb { color: #d14 } /* Literal.String.Backtick */
.highlight .sc { color: #d14 } /* Literal.String.Char */
.highlight .sd { color: #d14 } /* Literal.String.Doc */
.highlight .s2 { color: #d14 } /* Literal.String.Double */
.highlight .se { color: #d14 } /* Literal.String.Escape */
.highlight .sh { color: #d14 } /* Literal.String.Heredoc */
.highlight .si { color: #d14 } /* Literal.String.Interpol */
.highlight .sx { color: #d14 } /* Literal.String.Other */
.highlight .sr { color: #009926 } /* Literal.String.Regex */
.highlight .s1 { color: #d14 } /* Literal.String.Single */
.highlight .ss { color: #990073 } /* Literal.String.Symbol */
.highlight .bp { color: #999999 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #008080 } /* Name.Variable.Class */
.highlight .vg { color: #008080 } /* Name.Variable.Global */
.highlight .vi { color: #008080 } /* Name.Variable.Instance */
.highlight .il { color: #009999 } /* Literal.Number.Integer.Long */
.pl-c {
    color: #969896;
}

.pl-c1,.pl-mdh,.pl-mm,.pl-mp,.pl-mr,.pl-s1 .pl-v,.pl-s3,.pl-sc,.pl-sv {
    color: #0086b3;
}

.pl-e,.pl-en {
    color: #795da3;
}

.pl-s1 .pl-s2,.pl-smi,.pl-smp,.pl-stj,.pl-vo,.pl-vpf {
    color: #333;
}

.pl-ent {
    color: #63a35c;
}

.pl-k,.pl-s,.pl-st {
    color: #a71d5d;
}

.pl-pds,.pl-s1,.pl-s1 .pl-pse .pl-s2,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre,.pl-src,.pl-v {
    color: #df5000;
}

.pl-id {
    color: #b52a1d;
}

.pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
}

.pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
}

.pl-ml {
    color: #693a17;
}

.pl-mh,.pl-mh .pl-en,.pl-ms {
    color: #1d3e81;
    font-weight: bold;
}

.pl-mq {
    color: #008080;
}

.pl-mi {
    color: #333;
    font-style: italic;
}

.pl-mb {
    color: #333;
    font-weight: bold;
}

.pl-md,.pl-mdhf {
    background-color: #ffecec;
    color: #bd2c00;
}

.pl-mdht,.pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
}

.pl-mdr {
    color: #795da3;
    font-weight: bold;
}

.pl-mo {
    color: #1d3e81;
}
.task-list {
padding-left:10px;
margin-bottom:0;
}

.task-list li {
    margin-left: 20px;
}

.task-list-item {
list-style-type:none;
padding-left:10px;
}

.task-list-item label {
font-weight:400;
}

.task-list-item.enabled label {
cursor:pointer;
}

.task-list-item+.task-list-item {
margin-top:3px;
}

.task-list-item-checkbox {
display:inline-block;
margin-left:-20px;
margin-right:3px;
vertical-align:1px;
}
</style>
</head>
<body>
<h1 id="pwnable-kr-toddler-s-bottle-blackjack">PWNABLE.KR-Toddler&#39;s Bottle-blackjack</h1>
<p><strong>Author:wnagzihxa1n<br>E-Mail:wnagzihxa1n@gmail.com</strong></p>
<h2 id="problem-description">Problem Description</h2>
<pre><code>Hey! check out this C implementation of blackjack game!
I found it online
* http://cboard.cprogramming.com/c-programming/114023-simple-blackjack-program.html

I like to give my flags to millionares.
how much money you got?


Running at : nc pwnable.kr 9009
</code></pre><p>这题是玩一个扑克牌游戏，大概就是要花钱下赌注，然后每局开始前会告诉你拥有多少钱，然后要赚到很多很多钱，才能拿到Flag</p>
<p>这，靠一局一局玩想拿到Flag那是没戏的</p>
<p>所以试玩一下后，我彻底放弃了</p>
<p>题目给了源码，所以来研究一下源码，源码很长很长很长很长</p>
<pre><code>// Programmer: Vladislav Shulman
// Final Project
// Blackjack

// Feel free to use any and all parts of this program and claim it as your own work

//FINAL DRAFT

#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#include &lt;time.h&gt;                //Used for srand((unsigned) time(NULL)) command
#include &lt;process.h&gt;             //Used for system(&quot;cls&quot;) command

#define spade 06                 //Used to print spade symbol
#define club 05                  //Used to print club symbol
#define diamond 04               //Used to print diamond symbol
#define heart 03                 //Used to print heart symbol
#define RESULTS &quot;Blackjack.txt&quot;  //File name is Blackjack

//Global Variables
int k;
int l;
int d;
int won;
int loss;
int cash = 500;
int bet;
int random_card;
int player_total=0;
int dealer_total;

//Function Prototypes
int clubcard();      //Displays Club Card Image
int diamondcard();   //Displays Diamond Card Image
int heartcard();     //Displays Heart Card Image
int spadecard();     //Displays Spade Card Image
int randcard();      //Generates random card
int betting();       //Asks user amount to bet
void asktitle();     //Asks user to continue
void rules();        //Prints &quot;Rules of Vlad&#39;s Blackjack&quot; menu
void play();         //Plays game
void dealer();       //Function to play for dealer AI
void stay();         //Function for when user selects &#39;Stay&#39;
void cash_test();    //Test for if user has cash remaining in purse
void askover();      //Asks if user wants to continue playing
void fileresults();  //Prints results into Blackjack.txt file in program directory

//Main Function
int main(void)
{
    int choice1;
    printf(&quot;\n&quot;);
    printf(&quot;\n&quot;);
    printf(&quot;\n&quot;);
    printf(&quot;\n              222                111                            &quot;);
    printf(&quot;\n            222 222            11111                              &quot;);
    printf(&quot;\n           222   222          11 111                            &quot;); 
    printf(&quot;\n                222              111                               &quot;); 
    printf(&quot;\n               222               111                           &quot;);   
    printf(&quot;\n&quot;);
    printf(&quot;\n%c%c%c%c%c     %c%c            %c%c         %c%c%c%c%c    %c    %c                &quot;, club, club, club, club, club, spade, spade, diamond, diamond, heart, heart, heart, heart, heart, club, club);  
    printf(&quot;\n%c    %c    %c%c           %c  %c       %c     %c   %c   %c              &quot;, club, club, spade, spade, diamond, diamond, heart, heart, club, club);            
    printf(&quot;\n%c    %c    %c%c          %c    %c     %c          %c  %c               &quot;, club, club, spade, spade, diamond, diamond, heart, club, club);                        
    printf(&quot;\n%c%c%c%c%c     %c%c          %c %c%c %c     %c          %c %c              &quot;, club, club, club, club, club, spade, spade, diamond, diamond, diamond, diamond, heart, club, club);      
    printf(&quot;\n%c    %c    %c%c         %c %c%c%c%c %c    %c          %c%c %c             &quot;, club, club, spade, spade, diamond, diamond, diamond, diamond, diamond, diamond, heart, club, club, club);                       
    printf(&quot;\n%c     %c   %c%c         %c      %c    %c          %c   %c               &quot;, club, club, spade, spade, diamond, diamond, heart, club, club);                                         
    printf(&quot;\n%c     %c   %c%c        %c        %c    %c     %c   %c    %c             &quot;, club, club, spade, spade, diamond, diamond, heart, heart, club, club);                                                            
    printf(&quot;\n%c%c%c%c%c%c    %c%c%c%c%c%c%c   %c        %c     %c%c%c%c%c    %c     %c            &quot;, club, club, club, club, club, club, spade, spade, spade, spade, spade, spade, spade, diamond, diamond, heart, heart, heart, heart, heart, club, club);                                                                                     
    printf(&quot;\n&quot;);     
    printf(&quot;\n                        21                                   &quot;);

    printf(&quot;\n     %c%c%c%c%c%c%c%c      %c%c         %c%c%c%c%c    %c    %c                &quot;, diamond, diamond, diamond, diamond, diamond, diamond, diamond, diamond, heart, heart, club, club, club, club, club, spade, spade);                     
    printf(&quot;\n        %c%c        %c  %c       %c     %c   %c   %c              &quot;, diamond, diamond, heart, heart, club, club, spade, spade);                                      
    printf(&quot;\n        %c%c       %c    %c     %c          %c  %c               &quot;, diamond, diamond, heart, heart, club, spade, spade);                                           
    printf(&quot;\n        %c%c       %c %c%c %c     %c          %c %c              &quot;, diamond, diamond, heart, heart, heart, heart, club, spade, spade);                                     
    printf(&quot;\n        %c%c      %c %c%c%c%c %c    %c          %c%c %c             &quot;, diamond, diamond, heart, heart, heart, heart, heart, heart, club, spade, spade, spade);                                                
    printf(&quot;\n        %c%c      %c      %c    %c          %c   %c               &quot;, diamond, diamond, heart, heart, club, spade, spade);                                                                               
    printf(&quot;\n     %c  %c%c     %c        %c    %c     %c   %c    %c             &quot;, diamond, diamond, diamond, heart, heart, club, spade, spade);                                                                                                               
    printf(&quot;\n      %c%c%c      %c        %c     %c%c%c%c%c    %c     %c            &quot;, diamond, diamond, diamond, heart, heart, club, club, club, club, club, spade, spade);                                                                                                                                        
    printf(&quot;\n&quot;);  
    printf(&quot;\n         222                     111                         &quot;);
    printf(&quot;\n        222                      111                         &quot;);
    printf(&quot;\n       222                       111                         &quot;);
    printf(&quot;\n      222222222222222      111111111111111                       &quot;);
    printf(&quot;\n      2222222222222222    11111111111111111                         &quot;);
    printf(&quot;\n&quot;);
    printf(&quot;\n&quot;);

    asktitle();

    printf(&quot;\n&quot;);
    printf(&quot;\n&quot;);
    system(&quot;pause&quot;);
    return(0);
} //end program

void asktitle() // Function for asking player if they want to continue
{
    char choice1;
    int choice2;

     printf(&quot;\n                 Are You Ready?&quot;);
     printf(&quot;\n                ----------------&quot;);
     printf(&quot;\n                      (Y/N)\n                        &quot;);
     scanf(&quot;\n%c&quot;,&amp;choice1);

    while((choice1!=&#39;Y&#39;) &amp;&amp; (choice1!=&#39;y&#39;) &amp;&amp; (choice1!=&#39;N&#39;) &amp;&amp; (choice1!=&#39;n&#39;)) // If invalid choice entered
    {                                                                           
        printf(&quot;\n&quot;);
        printf(&quot;Incorrect Choice. Please Enter Y for Yes or N for No.\n&quot;);
        scanf(&quot;%c&quot;,&amp;choice1);
    }


    if((choice1 == &#39;Y&#39;) || (choice1 == &#39;y&#39;)) // If yes, continue. Prints menu.
    { 
            system(&quot;cls&quot;);
            printf(&quot;\nEnter 1 to Begin the Greatest Game Ever Played.&quot;);
            printf(&quot;\nEnter 2 to See a Complete Listing of Rules.&quot;);
            printf(&quot;\nEnter 3 to Exit Game. (Not Recommended)&quot;);
            printf(&quot;\nChoice: &quot;);
            scanf(&quot;%d&quot;, &amp;choice2); // Prompts user for choice
            if((choice2&lt;1) || (choice2&gt;3)) // If invalid choice entered
            {
                printf(&quot;\nIncorrect Choice. Please enter 1, 2 or 3\n&quot;);
                scanf(&quot;%d&quot;, &amp;choice2);
            }
            switch(choice2) // Switch case for different choices
            {   
                case 1: // Case to begin game
                   system(&quot;cls&quot;);

                   play();

                   break;

                case 2: // Case to see rules
                   system(&quot;cls&quot;);
                   rules();
                   break;

                case 3: // Case to exit game
                   printf(&quot;\nYour day could have been perfect.&quot;);
                   printf(&quot;\nHave an almost perfect day!\n\n&quot;);
                   system(&quot;pause&quot;);
                   exit(0);
                   break;

                default:
                   printf(&quot;\nInvalid Input&quot;);
            } // End switch case
    } // End if loop



    else if((choice1 == &#39;N&#39;) || (choice1 == &#39;n&#39;)) // If no, exit program
    {
        printf(&quot;\nYour day could have been perfect.&quot;);
        printf(&quot;\nHave an almost perfect day!\n\n&quot;);
        system(&quot;pause&quot;);
        exit(0);
    }

    return;
} // End function

void rules() //Prints &quot;Rules of Vlad&#39;s Blackjack&quot; list
{
     char choice1;
     int choice2;

     printf(&quot;\n           RULES of VLAD&#39;s BLACKJACK&quot;);
     printf(&quot;\n          ---------------------------&quot;);
     printf(&quot;\nI.&quot;);
     printf(&quot;\n     Thou shalt not question the odds of this game.&quot;);
     printf(&quot;\n      %c This program generates cards at random.&quot;, spade);
     printf(&quot;\n      %c If you keep losing, you are very unlucky!\n&quot;, diamond);

     printf(&quot;\nII.&quot;);
     printf(&quot;\n     Each card has a value.&quot;);
     printf(&quot;\n      %c Number cards 1 to 10 hold a value of their number.&quot;, spade);
     printf(&quot;\n      %c J, Q, and K cards hold a value of 10.&quot;, diamond);
     printf(&quot;\n      %c Ace cards hold a value of 11&quot;, club);
     printf(&quot;\n     The goal of this game is to reach a card value total of 21.\n&quot;);

     printf(&quot;\nIII.&quot;);
     printf(&quot;\n     After the dealing of the first two cards, YOU must decide whether to HIT or STAY.&quot;);
     printf(&quot;\n      %c Staying will keep you safe, hitting will add a card.&quot;, spade);
     printf(&quot;\n     Because you are competing against the dealer, you must beat his hand.&quot;);
     printf(&quot;\n     BUT BEWARE!.&quot;);
     printf(&quot;\n      %c If your total goes over 21, you will LOSE!.&quot;, diamond);
     printf(&quot;\n     But the world is not over, because you can always play again.\n&quot;);
     printf(&quot;\n%c%c%c YOUR RESULTS ARE RECORDED AND FOUND IN SAME FOLDER AS PROGRAM %c%c%c\n&quot;, spade, heart, club, club, heart, spade);
     printf(&quot;\nWould you like to go the previous screen? (I will not take NO for an answer)&quot;);
     printf(&quot;\n                  (Y/N)\n                    &quot;);
     scanf(&quot;\n%c&quot;,&amp;choice1);

     while((choice1!=&#39;Y&#39;) &amp;&amp; (choice1!=&#39;y&#39;) &amp;&amp; (choice1!=&#39;N&#39;) &amp;&amp; (choice1!=&#39;n&#39;)) // If invalid choice entered
    {                                                                           
        printf(&quot;\n&quot;);
        printf(&quot;Incorrect Choice. Please Enter Y for Yes or N for No.\n&quot;);
        scanf(&quot;%c&quot;,&amp;choice1);
    }


    if((choice1 == &#39;Y&#39;) || (choice1 == &#39;y&#39;)) // If yes, continue. Prints menu.
    { 
            system(&quot;cls&quot;);
            asktitle();
    } // End if loop



    else if((choice1 == &#39;N&#39;) || (choice1 == &#39;n&#39;)) // If no, convinces user to enter yes
    {
        system(&quot;cls&quot;);
        printf(&quot;\n                 I told you so.\n&quot;);
        asktitle();
    }

    return;
} // End function

int clubcard() //Displays Club Card Image
{


    srand((unsigned) time(NULL)); //Generates random seed for rand() function
    k=rand()%13+1;

    if(k&lt;=9) //If random number is 9 or less, print card with that number
    {
    //Club Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, club);
    printf(&quot;|  %d  |\n&quot;, k);
    printf(&quot;|    %c|\n&quot;, club);
    printf(&quot;-------\n&quot;);
    }


    if(k==10) //If random number is 10, print card with J (Jack) on face
    {
    //Club Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, club);
    printf(&quot;|  J  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, club);
    printf(&quot;-------\n&quot;);
    }


    if(k==11) //If random number is 11, print card with A (Ace) on face
    {
    //Club Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, club);
    printf(&quot;|  A  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, club);
    printf(&quot;-------\n&quot;);
    if(player_total&lt;=10) //If random number is Ace, change value to 11 or 1 depending on dealer total
         {
             k=11;
         }

         else
         {

             k=1;
         }
    }


    if(k==12) //If random number is 12, print card with Q (Queen) on face
    {
    //Club Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, club);
    printf(&quot;|  Q  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, club);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }


    if(k==13) //If random number is 13, print card with K (King) on face
    {
    //Club Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, club);
    printf(&quot;|  K  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, club);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }
    return k;           
}// End function

int diamondcard() //Displays Diamond Card Image
{


    srand((unsigned) time(NULL)); //Generates random seed for rand() function
    k=rand()%13+1;

    if(k&lt;=9) //If random number is 9 or less, print card with that number
    {
    //Diamond Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, diamond);
    printf(&quot;|  %d  |\n&quot;, k);
    printf(&quot;|    %c|\n&quot;, diamond);
    printf(&quot;-------\n&quot;);
    }

    if(k==10) //If random number is 10, print card with J (Jack) on face
    {
    //Diamond Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, diamond);
    printf(&quot;|  J  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, diamond);
    printf(&quot;-------\n&quot;);
    }

    if(k==11) //If random number is 11, print card with A (Ace) on face
    {
    //Diamond Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, diamond);
    printf(&quot;|  A  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, diamond);
    printf(&quot;-------\n&quot;);
    if(player_total&lt;=10) //If random number is Ace, change value to 11 or 1 depending on dealer total
         {
             k=11;
         }

         else
         {
             k=1;
         }
    }

    if(k==12) //If random number is 12, print card with Q (Queen) on face
    {
    //Diamond Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, diamond);
    printf(&quot;|  Q  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, diamond);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }

    if(k==13) //If random number is 13, print card with K (King) on face
    {
    //Diamond Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, diamond);
    printf(&quot;|  K  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, diamond);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }
    return k;
}// End function

int heartcard() //Displays Heart Card Image
{


    srand((unsigned) time(NULL)); //Generates random seed for rand() function
    k=rand()%13+1;

    if(k&lt;=9) //If random number is 9 or less, print card with that number
    {
    //Heart Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, heart); 
    printf(&quot;|  %d  |\n&quot;, k);
    printf(&quot;|    %c|\n&quot;, heart);
    printf(&quot;-------\n&quot;);
    }

    if(k==10) //If random number is 10, print card with J (Jack) on face
    {
    //Heart Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, heart);
    printf(&quot;|  J  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, heart);
    printf(&quot;-------\n&quot;);
    }

    if(k==11) //If random number is 11, print card with A (Ace) on face
    {
    //Heart Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, heart);
    printf(&quot;|  A  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, heart);
    printf(&quot;-------\n&quot;);
    if(player_total&lt;=10) //If random number is Ace, change value to 11 or 1 depending on dealer total
         {
             k=11;
         }

         else
         {
             k=1;
         }
    }

    if(k==12) //If random number is 12, print card with Q (Queen) on face
    {
    //Heart Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, heart);
    printf(&quot;|  Q  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, heart);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }

    if(k==13) //If random number is 13, print card with K (King) on face
    {
    //Heart Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, heart);
    printf(&quot;|  K  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, heart);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }
    return k;
} // End Function

int spadecard() //Displays Spade Card Image
{


    srand((unsigned) time(NULL)); //Generates random seed for rand() function
    k=rand()%13+1;

    if(k&lt;=9) //If random number is 9 or less, print card with that number
    {
    //Spade Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, spade);
    printf(&quot;|  %d  |\n&quot;, k);
    printf(&quot;|    %c|\n&quot;, spade);
    printf(&quot;-------\n&quot;);
    }

    if(k==10) //If random number is 10, print card with J (Jack) on face
    {
    //Spade Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, spade);
    printf(&quot;|  J  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, spade);
    printf(&quot;-------\n&quot;);
    }

    if(k==11) //If random number is 11, print card with A (Ace) on face
    {
    //Spade Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, spade);
    printf(&quot;|  A  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, spade);
    printf(&quot;-------\n&quot;);
    if(player_total&lt;=10) //If random number is Ace, change value to 11 or 1 depending on dealer total
         {
             k=11;
         }

         else
         {
             k=1;
         }
    }

    if(k==12) //If random number is 12, print card with Q (Queen) on face
    {
    //Spade Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, spade);
    printf(&quot;|  Q  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, spade);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }

    if(k==13) //If random number is 13, print card with K (King) on face
    {
    //Spade Card
    printf(&quot;-------\n&quot;);
    printf(&quot;|%c    |\n&quot;, spade);
    printf(&quot;|  K  |\n&quot;);
    printf(&quot;|    %c|\n&quot;, spade);
    printf(&quot;-------\n&quot;);
    k=10; //Set card value to 10
    }
    return k;
} // End Function

int randcard() //Generates random card
{


     srand((unsigned) time(NULL)); //Generates random seed for rand() function
     random_card = rand()%4+1;

     if(random_card==1)
     {   
         clubcard();
         l=k;
     }

     if(random_card==2)
     {
         diamondcard();
         l=k;
     }

     if(random_card==3)
     {
         heartcard();
         l=k;
     }

     if(random_card==4)
     {
         spadecard();
         l=k;
     }    
     return l;
} // End Function   

void play() //Plays game
{

     int p=0; // holds value of player_total
     int i=1; // counter for asking user to hold or stay (aka game turns)
     char choice3;

     cash = cash;
     cash_test();
     printf(&quot;\nCash: $%d\n&quot;,cash); //Prints amount of cash user has
     randcard(); //Generates random card
     player_total = p + l; //Computes player total
     p = player_total;
     printf(&quot;\nYour Total is %d\n&quot;, p); //Prints player total
     dealer(); //Computes and prints dealer total
     betting(); //Prompts user to enter bet amount

     while(i&lt;=21) //While loop used to keep asking user to hit or stay at most twenty-one times
                  //  because there is a chance user can generate twenty-one consecutive 1&#39;s
     {
         if(p==21) //If user total is 21, win
         {
             printf(&quot;\nUnbelievable! You Win!\n&quot;);
             won = won+1;
             cash = cash+bet;
             printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
             dealer_total=0;
             askover();
         }

         if(p&gt;21) //If player total is over 21, loss
         {
             printf(&quot;\nWoah Buddy, You Went WAY over.\n&quot;);
             loss = loss+1;
             cash = cash - bet;
             printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
             dealer_total=0;
             askover();
         }

         if(p&lt;=21) //If player total is less than 21, ask to hit or stay
         {         
             printf(&quot;\n\nWould You Like to Hit or Stay?&quot;);

             scanf(&quot;%c&quot;, &amp;choice3);
             while((choice3!=&#39;H&#39;) &amp;&amp; (choice3!=&#39;h&#39;) &amp;&amp; (choice3!=&#39;S&#39;) &amp;&amp; (choice3!=&#39;s&#39;)) // If invalid choice entered
             {                                                                           
                 printf(&quot;\n&quot;);
                 printf(&quot;Please Enter H to Hit or S to Stay.\n&quot;);
                 scanf(&quot;%c&quot;,&amp;choice3);
             }


             if((choice3==&#39;H&#39;) || (choice3==&#39;h&#39;)) // If Hit, continues
             { 
                 randcard();
                 player_total = p + l;
                 p = player_total;
                 printf(&quot;\nYour Total is %d\n&quot;, p);
                 dealer();
                  if(dealer_total==21) //Is dealer total is 21, loss
                  {
                      printf(&quot;\nDealer Has the Better Hand. You Lose.\n&quot;);
                      loss = loss+1;
                      cash = cash - bet;
                      printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
                      dealer_total=0;
                      askover();
                  } 

                  if(dealer_total&gt;21) //If dealer total is over 21, win
                  {                      
                      printf(&quot;\nDealer Has Went Over!. You Win!\n&quot;);
                      won = won+1;
                      cash = cash+bet;
                      printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
                      dealer_total=0;
                      askover();
                  }
             }
             if((choice3==&#39;S&#39;) || (choice3==&#39;s&#39;)) // If Stay, does not continue
             {
                printf(&quot;\nYou Have Chosen to Stay at %d. Wise Decision!\n&quot;, player_total);
                stay();
             }
          }
             i++; //While player total and dealer total are less than 21, re-do while loop 
     } // End While Loop
} // End Function

void dealer() //Function to play for dealer AI
{
     int z;

     if(dealer_total&lt;17)
     {
      srand((unsigned) time(NULL) + 1); //Generates random seed for rand() function
      z=rand()%13+1;
      if(z&lt;=10) //If random number generated is 10 or less, keep that value
      {
         d=z;

      }

      if(z&gt;11) //If random number generated is more than 11, change value to 10
      {
         d=10;
      }

      if(z==11) //If random number is 11(Ace), change value to 11 or 1 depending on dealer total
      {
         if(dealer_total&lt;=10)
         {
             d=11;
         }

         else
         {
             d=1;
         }
      }
     dealer_total = dealer_total + d;
     }

     printf(&quot;\nThe Dealer Has a Total of %d&quot;, dealer_total); //Prints dealer total

} // End Function 

void stay() //Function for when user selects &#39;Stay&#39;
{
     dealer(); //If stay selected, dealer continues going
     if(dealer_total&gt;=17)
     {
      if(player_total&gt;=dealer_total) //If player&#39;s total is more than dealer&#39;s total, win
      {
         printf(&quot;\nUnbelievable! You Win!\n&quot;);
         won = won+1;
         cash = cash+bet;
         printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
         dealer_total=0;
         askover();
      }
      if(player_total&lt;dealer_total) //If player&#39;s total is less than dealer&#39;s total, loss
      {
         printf(&quot;\nDealer Has the Better Hand. You Lose.\n&quot;);
         loss = loss+1;
         cash = cash - bet;
         printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
         dealer_total=0;
         askover();
      }
      if(dealer_total&gt;21) //If dealer&#39;s total is more than 21, win
      {
         printf(&quot;\nUnbelievable! You Win!\n&quot;);
         won = won+1;
         cash = cash+bet;
         printf(&quot;\nYou have %d Wins and %d Losses. Awesome!\n&quot;, won, loss);
         dealer_total=0;
         askover();
      }
     }
     else
     {
         stay();
     }

} // End Function

void cash_test() //Test for if user has cash remaining in purse
{
     if (cash &lt;= 0) //Once user has zero remaining cash, game ends and prompts user to play again
     {
        printf(&quot;You Are Bankrupt. Game Over&quot;);
        cash = 500;
        askover();
     }
} // End Function

int betting() //Asks user amount to bet
{
 printf(&quot;\n\nEnter Bet: $&quot;);
 scanf(&quot;%d&quot;, &amp;bet);

 if (bet &gt; cash) //If player tries to bet more money than player has
 {
        printf(&quot;\nYou cannot bet more money than you have.&quot;);
        printf(&quot;\nEnter Bet: &quot;);
        scanf(&quot;%d&quot;, &amp;bet);
        return bet;
 }
 else return bet;
} // End Function

void askover() // Function for asking player if they want to play again
{
    char choice1;

     printf(&quot;\nWould You Like To Play Again?&quot;);
     printf(&quot;\nPlease Enter Y for Yes or N for No\n&quot;);
     scanf(&quot;\n%c&quot;,&amp;choice1);

    while((choice1!=&#39;Y&#39;) &amp;&amp; (choice1!=&#39;y&#39;) &amp;&amp; (choice1!=&#39;N&#39;) &amp;&amp; (choice1!=&#39;n&#39;)) // If invalid choice entered
    {                                                                           
        printf(&quot;\n&quot;);
        printf(&quot;Incorrect Choice. Please Enter Y for Yes or N for No.\n&quot;);
        scanf(&quot;%c&quot;,&amp;choice1);
    }


    if((choice1 == &#39;Y&#39;) || (choice1 == &#39;y&#39;)) // If yes, continue.
    { 
            system(&quot;cls&quot;);
            play();
    }

      else if((choice1 == &#39;N&#39;) || (choice1 == &#39;n&#39;)) // If no, exit program
    {
        fileresults();
        printf(&quot;\nBYE!!!!\n\n&quot;);
        system(&quot;pause&quot;);
        exit(0);
    }
    return;
} // End function

void fileresults() //Prints results into Blackjack.txt file in program directory
{
    FILE *fpresults; //File pointer is fpresults
    fpresults = fopen(RESULTS, &quot;w&quot;); //Creates file and writes into it
    if(fpresults == NULL) // what to do if file missing from directory
    {
               printf(&quot;\nError: File Missing\n&quot;);
               system(&quot;pause&quot;);
               exit(1);
    }
    else
    {     
     fprintf(fpresults,&quot;\n\t RESULTS&quot;);
     fprintf(fpresults,&quot;\n\t---------\n&quot;);
     fprintf(fpresults,&quot;\nYou Have Won %d Times\n&quot;, won);
     fprintf(fpresults,&quot;\nYou Have Lost %d Times\n&quot;, loss);
     fprintf(fpresults,&quot;\nKeep Playing and Set an All-Time Record!&quot;);
    } 
     fclose(fpresults);
     return;
} // End Function
</code></pre><p>是不是拉了很久，哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</p>
<p>其实有很多是没用的，比如规则那些，所以我们删掉没用的分支和函数，再来看一波，中间有一大波的功能性函数，但是，发现有一个函数<code>betting</code>函数，它的判断方式是有问题的，<code>cash</code>的全局定义为<code>500</code>，当我们输入的值大于这个值时，会要求再输一个数字，直接返回该数字作为赌注，这就，很有意思了</p>
<pre><code>t betting() //Asks user amount to bet
{
    printf(&quot;\n\nEnter Bet: $&quot;);
    scanf(&quot;%d&quot;, &amp;bet);

    if (bet &gt; cash) //If player tries to bet more money than player has
    {
        printf(&quot;\nYou cannot bet more money than you have.&quot;);
        printf(&quot;\nEnter Bet: &quot;);
        scanf(&quot;%d&quot;, &amp;bet);
        return bet;
    }
    else return bet;
} // End Function
</code></pre><p>然后我们输入<code>1000000</code>，然后赢就行了，然而还是很靠运气</p>
<pre><code>Cash: $500
-------
|C    |
|  4  |
|    C|
-------

Your Total is 4

The Dealer Has a Total of 5

Enter Bet: $1000000

You cannot bet more money than you have.1
Enter Bet: 1000000

Would You Like to Hit or Stay?
Please Enter H to Hit or S to Stay.
H
-------
|H    |
|  3  |
|    H|
-------

Your Total is 7

The Dealer Has a Total of 15

Would You Like to Hit or Stay?
Please Enter H to Hit or S to Stay.
H
-------
|C    |
|  A  |
|    C|
-------

Your Total is 18

The Dealer Has a Total of 23
Dealer Has Went Over!. You Win!

You have 2 Wins and 0 Losses. Awesome!

Would You Like To Play Again?
Please Enter Y for Yes or N for No

y

YaY_I_AM_A_MILLIONARE_LOL

Cash: $11000500
-------
|H    |
|  4  |
|    H|
-------

Your Total is 4

The Dealer Has a Total of 10

Enter Bet: $
</code></pre><p>Flag</p>
<pre><code>YaY_I_AM_A_MILLIONARE_LOL
</code></pre>
</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
